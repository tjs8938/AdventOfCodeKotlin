package AdventOfCodeKotlin.puzzles.EverybodyCodes2025

import AdventOfCodeKotlin.util.Combinatorics
import kotlin.math.abs
import kotlin.math.max
import kotlin.math.min

class Quest08 {
    companion object {
        fun part1() {
            val input =
                "1,32,14,30,14,1,17,1,17,1,17,30,14,30,14,32,12,29,15,31,15,31,12,28,12,28,10,26,10,26,7,23,7,22,3,19,32,16,32,16,2,20,3,17,1,17,1,16,32,20,4,23,7,23,5,18,2,18,2,19,32,16,3,19,6,22,6,22,6,22,6,21,5,21,5,21,5,24,8,24,12,31,15,31,15,3,19,3,23,11,28,12,28,8,25,9,26,12,27,13"
            val numbers = input.split(",").map { it.toInt() }
            println((0 until numbers.size - 1).count { abs(numbers[it] - numbers[it + 1]) == 16 })
        }

        fun part2() {
            val input =
                "1,140,9,148,26,147,29,146,27,150,37,151,38,156,40,172,49,165,47,164,33,167,48,166,34,148,35,169,55,170,58,182,62,181,61,177,51,171,49,173,50,175,52,165,48,163,46,161,42,160,28,159,45,158,40,157,41,174,60,172,57,167,47,169,53,180,54,179,66,185,68,186,77,189,38,168,46,158,41,161,43,163,31,162,32,165,44,175,53,164,30,153,29,148,27,149,36,151,16,152,39,160,50,167,34,184,63,183,67,210,73,211,71,182,33,168,56,174,49,178,70,179,53,165,46,162,47,171,64,204,77,215,76,214,89,193,87,222,84,220,85,223,92,224,93,225,94,227,95,230,101,231,102,217,81,218,83,210,87,192,86,190,39,170,54,164,45,167,7,174,12,175,48,159,50,166,57,177,65,207,78,189,85,221,104,238,110,240,142,239,134,244,137,246,144,21,173,59,181,17,155,18,184,67,182,72,203,63,169,8,174,13,176,48,172,43,195,97,194,89,216,79,217,82,225,106,226,93,188,77,185,19,158,38,171,58,169,34,183,33,165,40,151,17,179,11,177,53,166,32,164,56,202,70,180,16,178,51,162,29,149,30,154,18,186,20,143,243,145,26,146,249,156,39,191,82,209,66,176,69,201,102,233,140,31,147,32,163,44,154,40,162,49,170,42,174,6,173,52,166,8,175,14,176,10,178,61,205,65,185,33,181,56,169,59,182,23,194,43,160,31,153,38,188,74,213,88,226,84,187,21,191,95,229,101,216,80,219,90,218,97,193,96,228,94,189,76,184,83,226,107,247,144,239,104,223,86,207,64,172,4,161,47,160,52,179,57,165,7,142,36,187,73,212,74,211,99,198,100,197,44,155,45,176,65,209,87,208,78,221,86,220,103,237,111,236,132,235,108,234,141,255,157,37,159,2,163,54,200,58,164,6,167,62,168,35,150,17,156,41,173,12,172,5,142,238,147,30,161,26,149,37,188,18,158,254,139,251,150,39,171,56,175,69,212,87,191,22,180,15,181,79,222,105,224,85,206,78,190,20,154,46,170,256,156,32,183,62,201,55,163,47,174,61,173,11,149,246,125,25,186,19,143,235,130,239,110,251,168,41,151,27,158,252,138,26,162,254,137,240,131,229,113,256,117,1,112,236,103,219,83,214,70,201,71,180,62,166,31,161,40,171,9,178,84,221,91,215,101,199,68,211,98,196,25,126,7,168,63,170,10,177,13,189,21,192,45,157,50,169,48,173,5,124,226,129,240,148,30,150,16,153,43,158,2,171,37,152,17,189,39,151,254,161,28,132,238,135,243,102,232,89,192,15,144,241,118,204,85,190,38,172,65,206,104,245,87,227,84,186,64,173,13,154,22,195,46,166,54,176,15,184,33,141,35,187,20,197,24,123,221,81,202,115,215,71,205,95,192,43,173,57,152,44,174,253,169,46,155,243,112,2,166,49,159,51,168,6,182,10,150,54,201,23,193,86,209,98,210,66,184,24,195,99,220,77,205,90,194,61,165,50,177,8,141,236,85,180,79,197,101,242,136,245,155,34,185,76,235,146,233,142,9,176,81,198,58,167,42,151,56,203,114,1,178,59,164,255,111,241,105,207,79,219,137,256,160,4,175,5,133,244,87,246,103,231,140,32,167,8,183,36,166,33,123,236,109,214,74,176,52,222,128,225,86,205,121,215,72,209,106,249,144,237,134,61,195,16,118,242,145,229,139,29,163,51,218,143,15,177,60,133,6,166,47,154,75,213,89,250,98,235,135,214,88,230,109,200,84,219,117,203,25,124,246,107,14,192,97,239,81,191,42,162,55,202,118,15,182,86,240,77,241,112,199,80,223,138,18,136,63,171,250,161,3,179,78,219,51,148,65,181,88,248,108,255,123,4,176,16,146,231,127,247,145,226,96,191,19,110,12,188,26,180,11,141,230,130,25,198,75,182,32,155,237,109,252,97,250,134,211,90,185,81,161,55,125,224,52,189,35,157,38,150,244,119,5,181,22,190,19,196,43,177,47,211,107,197,111,23,203,103,13,100,11,99,208,105,242,155,1,119,223,83,245,135,62,205,120,235,110,202,63,182,254,166,13,117,206,69,142,218,108,228,127,249,105,255,175,83,230,147,234,85,188,73,152,72,200,22,161,51,216,71,181,80,173,40,192,56,178,82,243,138,225,130,28,131,54,165,41,172,51,136,214,50,156,20,171,256,88,215,92,186,10,127,8,140,253,154,238,78,240,113,2,118,14,168,246,139,3,129,232,92,247,150,19,157,79,233,122,220,82,162,251,173,17,182,68,142,34,151,252,89,12,102,244,95,231,104,202,41,153,58,139,220,137,253,88,194,15,142,217,126,208,61,183,12,190,44,185,37,143,70,177,256,115,220,52,123,206,26,127,43,152,239,113,228,154,76,183,38,170,45,193,41,132,5,184,69,199,18,93,229,100,213,48,129,227,53,160,21,174,39,159,248,166,1,187,96,22,175,80,198,24,112,244,76,236,133,209,56,163,6,124,53,149,52,177,14,183,71,144,240,143,219,86,176,84,202,116,30,155,49,157,43,128,233,136,64,170,249,114,222,104,255,183,7,91,195,18,156,237,62,176,94,242,70,210,134,25,207,96,178,2,89,248,120,212,108,19,109,250,88,153,235,75,181,18,140,237,79,161,236,92,22,194,66,139,9,98,221,120,244,167,31,119,201,111,196,12,101,241,142,245,125,211,133,28,192,8,185,2,143,40,130,44,198,63,167,49,196,115,252,169,39,213,102,234,99,219,138,57,204,60,229,147,231,68,150,36,141,76,203,24,124,54,230,132,59,223,50,215,103,247,93,17,130,49,218,116,204,122,51,164,43,206,105,193,90,4,189,106,212,75,242,131,231,153,74,224,81,162,18,174,73,232,60,171,12,99,181,251,86,243,144,72,185,39,127,209,134,42,112,227,69,131,25,179,32,143,234,61,146,225,67,187,30,158,79,182,16,192,29,114,6,93,184,19,142,35,186,9,149,33,124,211,57,126,247,169,75,200,117,242,81,177,16,92,248,145,35,188,3,165,30,99,223,88,152,87,239,148,237,105,254,73,203,29,179,85,169,4,128,240,156,231,134,62,213,108,15,202,59,154,229,82,10,109,247,138,64,216,40,191,7,173,68,130,237,158,36,207,27,97,253,120,49,164,241,69,143,77,226,66,141,227,152,21,208,43,175,252,107,209,22,189,95,246,170,36,182,98,191,113,4,142,11,83,10,188,47,199,20,144,218,46,206,133,56,150,29,116,200,60,228,145,251,132,70,215,85,151,71,245,149,83,174,10,169,64,243,80,159,5,125,53,137,222,47,170,88,254,87,179,51,217,90,206,97,233,110,23,93,216,102,14,84,199,22,95,238,122,52,157,77,141,214,119,198,118,246,143,21,151,224,73,134,43,113,201,68,174,54,231,49,160,247,176,254,121,1,188,112,23,183,101,9,99,29,191,104,249,110,214,125,19,160,37,187,75,215,136,15,193,6,107,251,180,3,190,94,12,197,71,143,10,162,235,60,134,241,155,238,111,41,131,4,115,203,110,15,86,210,38,186,33,163,248,79,244,145,219,112,192,23,109,227,61,237,124,64,141,75,146,51,158,47,173,3,118,196,11,89,153,70,204,132,55,151,250,155,96,26,128,226,131,201,14,106,3,159,233,114,225,83,12,184,16,120,28,162,57,181,85,218,40,169,74,256,107,239,63,137,248,125,65,149,32,198,9,170,50,135,42,176,49,232,151,227,121,201,27,95,177,248,113,187,2,154,74,233,133,25,185,7,85,16,203,89,182,55,126,42,220,144,41,214,48,155,95,8,171,46,186,254,90,252,134,17,136,217,124,230,69,141,210,65,193,22,165,59,229,140,75,197,57,131,224,144,9,179,71,133,41,117,30,101,221,129,25,208,89,239,163,45,205,24,194,111,251,72,169,11,144,70,238,166,41,217,64,231,83,148,79,192,108,210,23,168,86,252,139,249,136,212,126,54,160,81,215,40,201,101,185,1,79,172,17,198,113,44,224,68,240,96,251,99,31,189,28,122,45,217,98,27,152,241,82,161,48,201,16,107,190,81,147,213,83,195,62,196,100,235,103,253,72,247,171,3,112,27,206,42,159,243,65,140,245,175,93,22,201,67,129,44,199,111,12,103,204,18,124,63,228,87,21,179,82,7,196,112,226,144,217,130,5,91,154,240,116,192,111,205,29,98,255,136,33,158,230,118,222,146,31,137,52,138,239,76,180,256,167,245,119,250,108,200,20,155,94,19,207,54,130,53,150,66,151,235,142,78,156,234,126,9,187,51,169,237,73,170,255,74,135,229,153,223,45,227,140,207,26,136,53,226,69,188,2,125,56,220,75,183,37,195,49,132,203,55,166,28,199,51,157,18,175,94,8,139,67,194,118,31,102,32,181,12,109,219,46,197,120,3,186,72,133,59,155,225,145,15,117,224,115,47,128,254,187,111,235,56,165,34,90,14,100,211,23,191,114,36,91,17,158,1,162,4,182,27,141,12,203,138,221,72,145,80,236,165,38,126,34,160,100,32,215,51,156,97,249,81,150,86,239,127,58,154,21,195,15,113,253,78,158,28,134,230,125,4,100,236,142,213,25,187,95,212,49,168,243,176,47,225,40,164,252,159,99,2,75,156,224,150,62,147,214,93,154,60,233,105,220,125,35,89,34,168,31,196,94,244,178,67,5,107,231,98,179,249,167,84,152,255,122,61,229,39,104,234,88,23,95,28,129,248,183,77,178,7,114,204,21,194,2,138,205,125,6,119,47,200,130,215,137,18,108,182,80,161,249,88,183,252,172,20,209,113,25,111,231,116,13,96,9,193,70,194,41,146,210,140,74,205,63,242,148,216,136,59,251,131,44,164,5,191,45,228,66,250,174,92,37,155,77,172,242,139,18,103,186,36,219,121,50,232,105,39,93,24,144,6,199,14,129,218,64,123,53,239,69,235,167,82,148,4,132,37,205,42,127,66,195,106,207,133,226,152,12,119,233,157,48,115,189,252,126,19,93,246,67,149,214,21,158,98,240,64,245,143,36,172,90,235,136,251,154,48,179,16,87,2,63,135,52,238,162,23,105,177,82,6,138,34,188,11,199,53,168,71,240,108,186,256,95,154,248,121,36,223,159,230,129,198,67,142,49,133,73,183,11,170,15,116,38,103,199,59,227,75,189,1,91,35,218,42,132,243,122,210,47,231,160,26,198,120,74,195,69,123,62,226,141,248,104,25,146,211,119,64,199,110,185,67,6,184,41,213,31,165,229,120,60,164,237,75,135,212,99,44,114,251,58,250,147,78,10,138,204,95,13,122,3,92,180,33,144,244,158,102,161,52,124,55,242,176,22,97,219,27,115,193,255,191,77,142,209,28,201,12,106,229,58,222,129,51,145,238,97,138,54,125,207,60,190,116,227,146,50,211,147,100,29,194,8,98,32,148,236,155,71,214,111,256,163,233,170,243,59,140,250,184,4,158,99,253,83,246,130,89,152,69,222,44,171,241,86,16,109,238,141,213,128,192,256,80,150,230,74,145,103,232,62,156,23,189,47,168,83,123,29,180,50,162,226,125,71,199,117,246,65,224,107,7,134,9,203,45,113,13,118,6,147,82,172,21,198,18,91,138,254,116,22,88,33,102,210,84,131,70,176,58,136,197,129,17,205,145,218,74,248,169,43,226,35,220,92,38,142,101,238,87,22,174,85,141,7,81,2,160,235,128,216,110,40,212,20,183,79,242,99,140,93,38,219,123,254,174,80,120,65,5,76,122,237,51,134,245,159,46,187,91,163,39,198,121,223,41,97,11,184,102,16,183,15,135,208,48,139,73,255,146,234,115,7,68,149,107,13,193,82,27,99,45,162,83,8,153,85,125,222,152,219,136,95,37,229,166,61,206,126,67,251,189,41,203,139,53,243,182,12,191,252,93,235,168,37,216,256,141,68,239,111,153,242,162,103,150,52,203,144,88,129,74,178,46,226,11,204,131,76,156,225,39,215,104,15,169,23,167,38,125,213,66,3,197,135,94,26,142,16,231,91,247,57,151,63,10,128,50,131,255,133,29,125,64,181,98,194,110,33,93,41,143,3,156,236,124,65,248,209,37,182,253,146,243,94,226,158,48,193,60,1,195,5,186,63,3,175,67,121,75,162,245,138,27,211,114,69,207,141,94,154,25,132,32,224,9,63,215,24,170,76,202,64,147,105,180,99,55,113,205,19,177,245,96,23,216,48,224,159,100,156,49,213,57,252,73,119,253,214,26,181,91,132,221,127,86,151,109,167,228,128,60,155,247,80,196,45,130,195,233,100,200,137,14,70,235,158,103,24,165,67,212,143,50,163,82,26,159,38,227,91,244,66,5,120,252,133,210,135,79,245,184,36,230,15,207,246,151,30,157,253,101,37,124,70,109,150,239,174,11,91,197,76,116,9,184,68,121,18,233,171,16,126,35,90,146,209,33,203,59,142,53,129,196,6,222,89,136,76,2,218,56,244,78,180,14,105,19,159,240,203,107,154,113,28,104,178,239,136,42,96,218,131,17,86,31,103,35,201,256,73,118,207,7,123,247,140,66,12,74,186,114,195,250,167,54,223,124,84,164,92,206,34,108,8,138,72,15,200,82,188,256,64,26,190,253,135,96,157,116,18,176,237,199,67,152,105,17,180,48,102,188,126,80,239,171,35,156,37,228,29,210,249,56,140,208,75,114,2,181,13,203,242,165,83,28,101,174,43,238,231,97,247,8,33,190,70,166,113"
            val numbers = input.split(",").map { it.toInt() }
            val lines = (0 until numbers.size - 1).map {
                min(numbers[it], numbers[it + 1]) to
                        max(
                            numbers[it], numbers[it + 1]
                        )
            }
            val pairs = Combinatorics.combinations(lines, 2).map { it[0] to it[1] }
                .filter { (a, b) -> setOf(a.first, a.second, b.first, b.second).size == 4 }
            println(
                pairs
                    .count { (a, b) ->
                        (a.first < b.first && b.first < a.second) != (a.first < b.second && b.second < a.second)
                    })
        }

        fun part3() {
            val input = """
                1,85,199,63,187,64,189,66,192,49,147,48,146,47,185,46,145,45,183,55,205,91,207,95,209,96,211,97,212,98,213,99,214,100,223,101,203,90,202,53,189,27,188,65,199,94,209,95,208,57,207,92,206,91,204,54,183,46,144,44,181,42,180,41,141,43,143,45,184,56,205,102,226,103,227,104,228,105,229,106,230,107,231,129,33,178,11,179,23,176,22,175,21,118,28,190,67,191,68,194,109,193,65,166,64,200,63,159,62,197,61,196,89,201,90,208,94,207,56,206,103,205,92,212,99,222,98,211,96,210,97,216,101,204,60,196,69,200,58,189,47,145,44,143,42,142,43,180,12,176,21,117,20,175,8,87,6,172,5,86,3,85,2,84,256,83,194,66,202,71,248,73,249,75,250,76,221,99,223,98,220,77,251,74,204,102,217,97,219,70,210,95,215,100,203,54,192,108,233,107,232,106,228,103,197,90,204,72,212,71,247,70,202,91,208,35,131,34,207,104,206,55,191,49,148,48,187,26,186,58,157,57,199,95,200,96,216,41,188,88,10,173,7,87,203,53,156,52,202,89,206,67,214,73,213,93,208,96,201,98,219,99,220,76,252,79,254,161,10,177,22,118,23,175,7,171,5,173,9,174,62,198,51,151,15,182,24,119,29,191,69,247,67,189,88,11,162,255,83,193,108,234,107,190,66,213,65,167,2,86,1,165,58,195,110,194,51,150,50,198,111,196,84,3,168,18,170,42,144,45,181,13,178,34,130,35,133,37,135,36,209,64,191,59,203,91,201,71,204,55,184,25,119,30,122,29,190,92,208,34,132,37,137,5,85,4,172,20,118,27,187,67,192,68,176,19,116,18,166,63,208,33,206,96,185,39,139,43,182,87,183,17,169,32,197,111,195,61,205,67,246,65,198,85,200,94,214,98,221,77,191,93,207,75,253,159,60,158,59,204,88,9,177,31,141,45,146,46,184,57,164,58,209,37,134,39,179,12,147,47,144,10,162,254,82,193,22,109,195,60,197,80,253,160,63,188,87,9,176,20,174,14,157,61,158,58,201,94,202,100,222,77,255,81,193,66,246,64,186,40,215,101,217,43,145,48,196,110,23,181,86,182,14,165,17,117,19,171,6,137,38,133,39,159,15,166,28,189,72,249,74,203,71,210,107,191,108,211,65,194,23,119,34,143,32,121,31,206,90,207,35,178,21,174,8,172,56,208,105,185,25,111,1,149,14,89,12,163,256,166,29,202,99,224,101,195,84,6,173,42,216,95,184,75,255,82,4,136,36,208,32,142,46,194,61,245,62,165,27,120,31,124,215,41,170,3,135,40,179,13,148,1,110,193,49,197,112,199,52,152,248,74,214,122,39,136,45,192,50,149,246,63,209,97,187,66,167,68,175,67,160,9,172,11,145,243,111,24,177,102,196,32,205,54,163,53,230,105,231,131,233,132,35,153,249,70,248,72,195,79,229,51,182,104,198,33,128,38,185,78,251,156,54,202,86,4,171,43,134,35,181,47,195,31,142,219,76,218,124,30,168,71,190,69,248,68,206,32,119,21,108,212,59,213,97,186,106,16,182,85,256,164,11,89,197,63,201,28,137,7,86,180,103,225,127,216,130,36,120,22,108,235,112,236,109,192,107,15,157,54,147,256,160,37,208,75,170,250,74,215,123,31,207,105,227,156,61,159,9,178,77,1,84,199,26,188,59,195,42,133,192,93,214,40,140,30,202,73,169,4,87,5,167,19,185,77,223,151,16,183,104,208,62,158,252,71,189,63,245,161,41,168,31,117,22,182,18,176,8,84,194,64,160,66,191,48,124,181,87,204,95,183,70,203,99,171,3,114,2,150,224,128,229,50,195,66,214,39,121,28,115,242,155,14,181,43,144,239,114,201,97,206,34,198,112,200,57,237,58,210,69,250,169,113,2,82,6,174,101,255,165,10,143,33,186,96,212,109,24,194,111,244,59,164,56,197,138,218,44,196,79,6,86,179,122,33,207,30,139,47,221,75,177,120,37,127,185,128,215,42,239,146,11,161,236,55,193,67,173,100,39,160,35,209,92,191,94,210,64,192,80,233,129,187,85,215,99,38,138,47,123,180,36,154,225,149,49,228,48,162,71,249,169,19,91,17,106,187,25,141,237,102,176,254,78,3,136,195,62,239,150,32,127,34,179,69,203,29,167,111,26,200,81,5,170,114,240,43,103,181,84,10,174,118,18,171,115,13,89,205,60,238,113,198,93,206,73,251,55,147,231,53,172,252,174,16,116,173,57,158,235,130,189,98,188,131,232,78,223,150,15,161,70,211,107,23,83,4,135,45,242,146,255,59,157,20,108,163,9,194,82,202,58,244,48,125,183,91,31,204,73,13,180,104,158,16,90,200,106,209,68,189,107,162,235,79,234,132,190,37,184,87,2,166,110,197,33,203,89,8,194,137,41,102,238,162,1,168,112,27,136,38,120,176,101,237,81,21,193,30,141,219,138,9,69,253,57,209,87,3,63,240,145,12,199,105,184,96,36,131,218,139,198,61,191,6,66,247,72,214,152,232,156,225,133,246,62,207,32,141,44,241,144,51,248,167,69,195,25,85,180,83,200,52,230,76,170,100,225,148,31,116,172,117,16,107,19,192,71,188,70,250,155,101,175,13,156,235,52,248,154,60,193,8,80,186,59,238,39,129,225,164,109,191,133,43,102,178,91,14,74,169,99,201,27,205,88,3,151,34,94,182,120,40,122,45,220,75,251,68,10,196,112,166,13,146,236,130,33,187,84,168,11,180,78,18,90,198,58,256,101,40,216,132,194,41,240,150,212,65,5,115,17,153,224,72,177,121,37,98,249,167,113,199,56,157,219,159,228,79,231,106,161,252,54,148,50,125,181,28,200,88,183,121,224,149,233,133,189,89,5,136,2,62,219,74,255,100,221,37,237,109,1,61,239,102,174,60,245,83,9,195,78,191,127,227,157,103,44,124,182,50,197,67,207,146,93,205,28,88,13,200,59,196,24,140,236,101,172,3,76,185,79,165,247,51,153,99,40,187,98,202,108,18,180,126,35,119,176,90,4,64,6,138,29,192,21,92,179,118,171,27,87,140,197,11,71,191,17,76,210,102,156,104,229,49,105,19,77,204,96,205,74,254,160,220,103,177,78,253,113,165,224,42,145,237,163,234,148,256,79,131,191,5,114,35,236,153,215,86,8,177,117,173,102,45,182,91,7,193,70,12,152,225,44,217,123,30,120,184,18,140,199,34,159,40,130,192,106,160,68,247,49,150,230,169,33,235,51,250,66,205,30,178,83,199,58,190,134,82,22,139,204,100,41,217,158,255,57,207,55,231,54,236,32,125,216,43,239,38,209,84,166,97,151,233,159,107,201,15,116,11,82,181,92,213,60,165,110,243,55,232,129,193,138,204,147,53,250,171,78,229,75,15,189,108,23,81,244,146,218,160,8,139,86,183,41,142,89,207,98,150,211,48,105,47,245,132,191,38,222,97,37,95,148,240,143,203,115,33,118,223,162,109,20,116,169,43,124,179,81,241,42,99,249,67,177,91,144,252,66,188,134,25,212,84,201,143,219,136,26,86,28,191,20,80,235,174,253,175,121,213,64,199,106,24,222,48,126,223,102,154,9,90,32,179,73,224,78,131,189,46,221,101,203,67,11,87,180,23,93,35,123,186,82,229,160,245,111,234,30,155,233,47,211,149,2,112,169,98,44,240,39,215,157,231,152,16,73,151,237,113,201,59,3,111,164,77,233,28,206,141,24,110,239,40,223,26,185,44,101,238,149,47,124,176,122,225,155,217,161,69,183,128,234,142,33,151,208,78,7,63,190,109,56,192,81,10,137,84,27,121,178,255,73,226,165,98,152,242,82,203,5,91,142,199,90,6,193,107,52,231,25,105,13,153,230,170,119,207,61,172,118,213,26,108,1,57,244,46,143,238,81,133,226,131,41,242,144,200,14,115,243,135,194,85,10,89,171,114,34,237,176,116,180,93,37,210,65,186,128,218,137,235,147,94,198,11,68,246,49,124,70,220,87,138,43,191,72,169,7,192,61,238,32,203,86,188,107,22,210,147,45,126,184,92,145,232,26,189,136,37,241,182,63,5,135,82,173,231,56,236,79,130,185,97,45,104,197,72,154,103,179,119,222,163,224,155,228,47,193,39,204,54,108,252,55,146,50,104,226,81,254,58,130,237,38,134,201,3,213,156,218,19,76,127,179,75,206,30,225,101,48,249,120,4,137,27,200,135,1,74,15,105,160,110,192,94,38,158,33,219,21,75,230,83,167,40,171,101,42,125,189,3,89,141,243,184,74,207,37,240,180,15,88,7,65,247,151,99,168,115,18,202,142,10,70,209,45,100,213,39,140,42,102,216,112,163,75,155,235,93,190,18,217,147,240,109,251,72,151,207,83,28,188,49,234,162,113,239,63,165,220,22,110,231,23,195,255,53,201,86,12,81,25,233,60,188,133,83,182,105,154,229,171,66,212,52,251,106,208,69,150,96,35,169,121,41,144,238,33,131,236,139,16,160,235,154,210,1,198,143,90,196,63,186,48,104,153,226,45,245,133,2,60,5,174,124,74,180,117,68,252,70,14,107,54,190,76,254,146,223,166,111,199,2,170,251,113,34,152,237,138,86,169,13,66,173,233,177,123,224,28,164,108,242,46,99,149,31,126,5,215,160,10,195,131,183,94,232,80,129,77,17,227,79,181,85,29,235,53,249,97,167,67,120,208,255,102,175,90,140,216,159,111,233,150,209,40,238,58,6,89,199,80,241,146,203,117,167,21,79,23,122,44,134,187,127,55,106,18,73,193,253,67,161,222,49,100,154,53,191,4,115,162,95,35,220,9,79,211,23,146,229,21,103,158,218,61,112,174,231,83,7,67,195,48,139,226,166,219,34,123,182,13,129,56,186,81,1,213,72,2,200,24,84,203,54,256,197,10,63,12,164,83,132,80,166,118,67,174,44,210,255,145,94,184,240,32,114,200,56,151,213,109,204,252,50,230,148,59,194,136,186,21,156,106,190,91,8,219,103,243,39,223,164,237,181,129,217,42,98,248,64,162,239,131,234,157,93,185,122,69,193,51,107,154,101,235,32,129,184,31,227,18,191,137,88,221,164,115,64,250,77,158,229,103,51,172,120,71,12,116,246,70,201,251,47,210,57,4,203,253,49,129,230,21,106,185,75,128,176,125,197,34,89,190,72,219,147,202,85,167,220,64,11,92,189,119,247,134,231,176,76,256,130,63,235,141,88,201,26,142,245,84,182,37,242,185,95,205,33,93,40,224,132,180,38,91,12,66,204,102,195,52,155,10,138,188,68,207,73,152,206,62,111,168,248,117,18,109,161,233,27,223,50,250,98,48,123,218,7,194,108,153,74,23,78,25,196,254,211,24,234,160,116,32,227,93,10,67,248,165,18,70,168,98,146,44,232,162,213,38,121,4,214,65,191,130,78,179,104,157,31,208,58,109,242,182,135,187,87,17,217,167,112,23,193,44,136,85,195,133,34,84,179,123,75,204,6,170,224,51,202,15,175,126,188,97,147,238,36,244,143,9,61,13,158,93,24,161,71,124,41,239,64,193,141,92,6,217,103,47,125,178,86,216,3,190,15,131,57,8,157,105,211,1,73,189,42,210,106,153,29,82,206,146,216,162,49,97,200,35,161,2,54,237,59,108,190,245,121,72,178,92,232,57,196,43,101,222,11,144,95,160,228,82,198,22,211,71,183,120,188,46,96,164,113,173,90,30,192,253,212,2,201,149,64,202,17,228,157,76,184,119,66,115,36,183,130,176,236,30,239,29,139,38,203,251,64,182,131,84,14,63,8,77,229,54,103,196,247,45,125,4,148,209,256,70,194,255,55,198,35,146,100,172,126,78,234,176,73,163,114,159,254,214,28,203,76,251,143,41,132,38,165,61,154,238,151,105,53,1,169,225,81,181,58,128,34,168,226,44,100,233,46,209,20,231,179,117,69,199,51,184,70,123,171,85,175,131,244,42,139,190,5,78,128,192,95,246,195,26,234,61,217,124,197,144,93,7,205,72,17,113,161,214,256,102,155,19,69,178,128,231,42,160,38,241,150,106,221,166,10,80,127,46,104,177,14,86,32,202,115,61,3,167,15,185,57,188,35,239,138,85,197,147,23,235,178,232,104,152,223,171,79,19,119,72,21,221,97,198,250,205,102,153,110,191,106,50,96,143,51,126,17,159,59,189,99,166,113,1,200,107,252,202,25,83,15,215,145,225,29,183,243,43,97,246,162,16,76,20,75,134,241,169,8,195,137,185,27,95,201,80,236,182,34,144,231,24,107,149,204,30,81,155,105,10,65,114,15,228,78,230,23,140,92,156,74,225,120,179,80,164,119,221,48,253,44,186,62,249,208,256,212,53,5,219,171,33,220,163,120,65,164,215,166,255,128,54,250,73,24,170,126,26,151,108,162,72,25,222,89,39,94,193,247,112,64,159,117,63,220,8,141,189,91,181,62,166,30,147,5,192,23,210,59,11,127,77,205,29,240,171,232,76,133,202,4,88,135,191,44,121,34,141,40,168,100,52,236,158,226,16,92,45,190,138,37,214,84,5,166,122,178,103,156,94,221,162,23,133,66,113,217,2,137,46,124,177,255,213,25,109,203,152,33,239,60,15,117,205,248,194,89,41,92,36,129,175,86,132,174,57,191,252,45,216,17,190,48,102,55,11,156,243,31,201,68,179,238,94,13,116,71,218,165,9,140,187,107,222,41,193,79,210,88,171,121,181,232,20,203,248,183,92,138,12,198,246,205,26,240,123,43,126,81,172,251,50,154,222,36,159,87,199,114,156,7,80,133,198,105,249,41,140,194,55,233,142,98,39,169,85,174,45,90,13,227,102,2,132,242,32,228,167,213,251,204,40,134,179,38,211,64,235,184,58,233,156,19,67,8,92,186,118,70,24,185,125,168,121,66,199,73,116,182,12,223,72,194,78,31,89,172,220,117,188,139,11,62,131,81,224,146,102,157,55,100,201,151,111,60,212,3,72,252,49,196,31,140,238,103,4,220,169,127,177,82,244,67,24,223,38,245,122,46,89,225,175,119,39,222,165,109,156,209,76,178,137,244,192,18,101,51,95,149,104,27,206,94,25,135,235,49,4,165,82,160,113,13,58,246,35,154,86,130,217,5,121,68,255,198,123,162,69,15,229,151,250,207,8,56,237,85,38,205,253,70,176,81,203,65,195,74,232,22,236,166,66,9,104,145,196,256,180,79,186,55,217,172,233,81,33,227,106,144,191,88,32,156,116,222,147,96,148,6,190,99,170,109,250,200,136,90,134,61,5,64,118,73,220,44,255,114,242,145,54,218,173,133,183,234,18,160,6,57,14,189,65,174,35,80,206,252,209,248,96,161,110,241,28,152,112,149,25,188,99,56,193,95,203,52,106,14,201,72,120,218,75,22,174,230,163,51,9,196,109,167,38,131,74,2,219,164,76,118,156,237,21,194,40,184,140,7,52,183,141,99,45,171,60,190,131,65,15,179,87,156,77,181,235,31,186,234,50,211,247,97,53,12,187,233,19,63,248,200,154,4,81,153,103,244,160,121,21,91,176,7,191,75,171,29,207,158,115,63,210,251,40,90,183,105,24,79,253,194,101,39,166,213,27,71,246,135,240,193,111,68,8,112,171,49,187,142,237,69,254,217,170,124,28,243,151,103,175,44,93,233,126,83,157,62,200,3,57,147,108,203,136,236,34,204,247,91,39,253,122,77,26,135,83,130,88,47,128,167,237,28,176,224,162,42,205,6,216,75,233,44,249,196,72,153,56,243,197,1,150,48,96,54,164,117,242,83,208,157,232,146,109,2,58,203,98,199,23,221,125,225,41,214,165,114,18,107,153,239,139,197,150,246,123,175,73,127,82,199,35,112,26,75,248,124,15,226,137,87,186,18,61,177,92,133,241,23,212,169,218,70,198,149,108,16,59,105,29,96,215,250,121,211,2,187,43,132,181,137,42,88,164,126,220,1,134,238,20,107,253,65,182,230,14,148,30,191,147,113,67,236,160,222,43,120,173,52,4,48,87,235,175,138,76,33,180,54,9,93,51,156,223,140,225,78,186,23,103,49,183,115,6,74,27,69,202,3,132,52,102,179,72,113,25,165,217,177,134,65,252,193,89,151,7,159,231,127,182,32,218,45,161,95,34,158,29,199,242,157,92,131,184,47,254,205,243,30,183,85,172,134,84,235,191,124,173,80,223,64,240,31,111,149,100,153,8,150,97,208,246,212,82,227,14,188,42,248,202,113,3,53,145,103,59,1,218,176,137,230,109,144,105,219,168,16,85,245,81,239,32,185,60,256,135,91,210,162,63,119,215,174,12,228,19,219,92,53,10,50,102,240,77,130,93,182,143,218,157,73,229,135,237,194,153,117,38,255,219,64,17,146,235,48,185,119,74,192,43,82,27,239,19,113,200,137,189,16,215,80,180,230,85,168,68,151,225,138,15,62,21,209,153,201,36,170,87,154,116,217,69,245,29,126,254,99,164,37,176,67,28,97,40,242,25,197,20,220,36,79,178,216,163,122,255,66,243,186,105,233,193,136,82,156,107,64,13,104,159,125,84,42,93,14,145,199,249,170,51,196,12,85,33,204,245,131,87,37,157,106,27,247,206,116,59,133,67,182,44,207,244,119,153,232,111,10,222,167,98,186,240,18,128,28,146,194,77,180,133,239,157,79,118,37,78,221,115,148,210,41,231,74,197,255,152,101,145,51,105,11,229,33,124,185,234,59,169,50,201,249,52,194,30,244,24,178,140,54,173,220,176,86,123,49,179,136,233,189,34,172,138,21,57,112,252,90,153,223,97,36,184,22,99,191,246,144,240,160,124,24,156,199,68,136,255,209,166,85,188,3,134,69,110,143,113,9,57,17,187,70,26,224,181,95,56,219,67,111,146,5,47,175,10,116,77,226,6,192,38,183,139,17,104,61,206,159,78,123,21,210,242,149,110,247,158,36,53,97,142,78,229,236,135,198,207,252,104,27,43,178,182,131,239,170,37,83,199,152,151,229,217,202,177,88,42,224,111,84,99,127,20,64,85,94,124,202,183,248,51,149,3,201,146,215,242,33,177,232,13,238,64,237,81,168,187,152,99,205,43,53,60,61,57,213,55,43,51,247,2,78,254,138,174,48,36,40,16,191,146,18,212,228,251,220,190,13,120,24,81,132,2,175,161
            """.trimIndent()
            val numbers = input.split(",").map { it.toInt() }
            val lines = (0 until numbers.size - 1).map {
                min(numbers[it], numbers[it + 1]) to
                        max(
                            numbers[it], numbers[it + 1]
                        )
            }
            val choices = (1 until 256).flatMap { first ->
                (first..256).map { second ->
                    first to second
                }
            }
            println(choices.maxOf { a -> lines.count { b -> ((a.first < b.first && b.first < a.second) != (a.first < b.second && b.second < a.second)) && setOf(a.first, a.second, b.first, b.second).size in listOf(2, 4) } })
        }
    }
}

fun main() {
    Quest08.part1()
//    Quest08.part2()
    Quest08.part3()
}
